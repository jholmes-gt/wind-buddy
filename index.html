<!-- To do:  -->
<!-- 2. about, contact, ect pages -->
<!-- 3. Endbringer mode needs to scan through saved bags to determine the user's level (default to level 5 if not found) -->
<!-- 4. golf bag hover tooltips that display the clubs and levels saved in that bag -->

<!doctype html>
<html lang="en">
<head>
 <meta charset="utf-8" />
 <meta name="viewport" content="width=device-width, initial-scale=1">
 <meta
  name="description"
  content="WindBuddy is a web application designed to assist Golf Clash players in calculating shot adjustments based on wind conditions, club selections, and other factors. It features user authentication, golf bag management, and various tools to enhance and improve gameplay.">
 <title>WindBuddy</title>
 <link rel="stylesheet" href="styles.css">
 <link rel="icon" type="ico" href="windSymbol_round.ico">
</head>
<body  class="linear-gradient">

<div class="app">

<header class="wb-header">
  <div class="wb-header-inner">

    <!-- Left: Logo -->
    <div class="wb-logo">
    	<img src="3_in_1.png" alt="Wind Buddy Logo">
    </div>

	<!-- Middle: Toast Container -->
    <div id="toastContainer" class="toast-container"></div>

    <!-- Right: Account menu -->
    <div class="wb-account">
      <button id="loginBtn" class="auth-btn">Sign In</button>

      <div id="accountMenuContainer" class="account-wrapper hidden">
        <div id="accountMenuTrigger" class="account-trigger">
          Logged in as <span id="accountUserName"></span> ▼
        </div>

        <div id="accountDropdown" class="dropdown hidden">
          <div id="menuChangePassword" class="dropdown-item">Change Password</div>
          <div id="menuResetAppData" class="dropdown-item danger">Reset All App Data</div>
          <div id="menuDeleteAccount" class="dropdown-item danger">Delete Account</div>
          <div id="menuSignOut" class="dropdown-item signout">Sign Out</div>
        </div>
      </div>
    </div>

  </div>
</header>

	<!-- LOGIN MODAL -->
	<div id="loginModal" class="modal hidden">
		<div class="modal-content">
			<span id="loginClose" class="close">&times;</span>
			<h2>Sign in to Wind-Buddy</h2>
			<label>Email</label>
			<input type="email" id="loginEmail" class="auth-input">
			<label>Password</label>
			<input type="password" id="loginPassword" class="auth-input">
				<button id="emailLoginBtn" class="auth-action">Sign In</button>
				<button id="emailSignupBtn" class="auth-action">Create New Account</button>
			<div class="divider"><span>OR</span></div>
			<button id="googleLoginBtn" class="google-btn">
				<img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg">
				Sign In with Google
			</button>
		</div>
	</div>

	<!-- small modal for reauthentication info -->
	<div id="reauthModal" class="modal hidden">
		<div class="modal-content">
			<h2>Reauthentication Required</h2>
			<p>For security reasons, please enter your account password to proceed.</p>
			<input type="password" id="reauthPassword" class="auth-input">
			<div id="reauthBtnsRow" class="reauth-btns-row">
				<button id="reauthCancelBtn" class="auth-action">Cancel</button>
				<button id="reauthSubmitBtn" class="auth-action">Submit</button>
			</div>
		</div>
	</div>



	<!-- CATEGORY/SHOW CLUBS TOGGLE WRAPPER -->
    <div class="clubs-wrap">
    	<div class="clubs-top">
        	<!-- toggle is outside the collapsing element so it remains visible -->
        	<div id="toggleClubs" class="toggle-link">Hide Clubs ▲</div>
    	</div>
			<!-- CLUBS AND LEVELS -->
        <div id="clubGrid" class="club-grid">
        	<!-- categories created by JS -->
	    </div>
    </div>

	<!-- MAIN CONTROL ROW -->
	<div class="main">
			
				<!-- GOLF BAG PANEL -->
			<div id="golfBagsPanel" class="bagsPanel">
				
				<h4 class="headerWithInfoIcon" style="gap:1.07rem">
					GOLF BAGS
					<div class="tooltip-wrapper">
						<img src="info_icon.png" class="info-icon" id="gb-info-btn" style="margin-right:0.75rem;">
						<div class="tooltip" style="font-weight: normal;">
							Click here for more info about the Golf Bags Panel.
						</div>
					</div>
				</h4>

				<div class="bagsInnerPanel" id="bagsContainer">
					<div class="bag-row">
		    			<button id="btn_bag1" class="smaller-btn">Bag1</button>
		    			<button id="btn_bag1_save" class="small-btn">Save Current</button>
		  			</div>
          			<div class="bag-row">
		    			<button id="btn_bag2" class="smaller-btn">Bag2</button>
		    			<button id="btn_bag2_save" class="small-btn">Save Current</button>
					</div>
        			<div class="bag-row">
		    			<button id="btn_bag3" class="smaller-btn">Bag3</button>
		    			<button id="btn_bag3_save" class="small-btn">Save Current</button>
					</div>
        			<div class="bag-row">
		    			<button id="btn_bag4" class="smaller-btn">Bag4</button>
		    			<button id="btn_bag4_save" class="small-btn">Save Current</button>
					</div>
        			<div class="bag-row">
					    <button id="btn_bag5" class="smaller-btn">Bag5</button>
		    			<button id="btn_bag5_save" class="small-btn">Save Current</button>
					</div>
    		    </div>
						<!-- new overlay panel -->
    		    <div id="bag-toast" class="bag-toast"></div>
    		</div>
		
			<!-- TOOL PANEL -->
      		<div id="toolsBtnsPanel" class="toolsPanel">
				<h4 class="headerWithInfoIcon">
					TOOLS
					<div class="tooltip-wrapper">
						<img src="info_icon.png" class="info-icon" id="tools-info-btn" style="margin-right:0.75rem;">
						<div class="tooltip" style="font-weight: normal;">
							Click here for more info about the Tools Panel.
						</div>
					</div>
				</h4>
				<div class="toolsInnerPanel">
			        <button id="btn_endbringer" class="btn">Endbringer School</button>
        			<button id="btn_tourn1" class="btn">Tournament 1 Notes</button>
        			<button id="btn_tourn2" class="btn">Tournament 2 Notes</button>
        			<button id="btn_tourn3" class="btn">Tournament 3 Notes</button>
        			<button id="btn_reset" class="btn">CPC Mode/Reset</button>
        		</div>
      		</div>
	  
			<!-- CLUB INFORMATION PANEL -->
    		<div id="clubStatsPanel" class="clubInfoPanel">
        		<h4 id="active_club_info_hdr">CLUB INFO</h4>
        		<div class="club-info-grid" id="club_info_table">
            		<div class="club-info-row">Power__<span class="value" id="info-power">______</span></div>
					<div class="club-info-row">Accuracy__<span class="value" id="info-accuracy">___</span></div>
					<div class="club-info-row">Top Spin__<span class="value" id="info-topspin">___</span></div>
					<div class="club-info-row">Back Spin__<span class="value" id="info-backspin">__</span></div>
					<div class="club-info-row">Curl__<span class="value" id="info-curl">________</span></div>
					<div class="club-info-row">Ball Guide__<span class="value" id="info-ballguide">__</span></div>
	        	</div>
    		</div>


			<!-- SHOT ADJUSTMENTS PANEL -->
			<div id="saPanel" class="shotAdjPanel">
    		    <h4>Shot Adjustments</h4>
		
				<div class="sa_row">
					<label for="windInput">Wind (mph)</label>
					<div class="tooltip-wrapper">
						<input id="windInput" type="number" step="0.1" value="0.0">
						<div class="tooltip" role="status" aria-hidden="true" style="font-weight: normal;">
							Type 3 digits (no dot) for the wind (example: type 087 for 8.7 and 125 for 12.5)
						</div>
					</div>
				</div>
			
				<div class="sa_row">
				<label for="ballPower">Ball Power</label>
				<select id="ballPower"><option value=0 selected>0</option><option value=1>1</option><option value=2>2</option><option value=3>3</option><option value=4>4</option><option value=5>5</option><option value=6>6</option><option value=7>7</option><option value=8>8</option><option value=9>9</option><option value=10>10</option></select>
				</div>
			
				<div class="sa_row">
					<label for="clubDistance" style="margin-left:5px;width:28%">Club Distance</label>
					<div class="tooltip-wrapper" style="width:63%">
						<input id="clubDistance" type="range" style="width:100%" min="1" max="100" value="100">
						<div class="tooltip" role="status" aria-hidden="true">
							Club distance can be set by the slider or entering a value between 0 - 100 in the input box beside the slider.
						</div>
					</div>
					<input id="clubDistanceVal" type="number" step="1" value="100" style="margin-right:2px;width:9%">
				</div>
		
				<div class="sa_row">
					<label for="elevation">Elevation (%)</label>
					<input list="elevList" id="elevation" type="number" value="10" step="5" style="width:82px">
					<datalist id="elevList">
						<option value="-65">-65</option><option value="-60">-60</option><option value="-55">-55</option><option value="-50">-50</option><option value="-45">-45</option><option value="-40">-40</option><option value="-35">-35</option><option value="-30">-30</option><option value="-25">-25</option><option value="-20">-20</option><option value="-15">-15</option><option value="-10">-10</option><option value="-5">-5</option><option value="0">0</option><option value="5">5</option><option value="10">10</option><option value="15">15</option><option value="20">20</option><option value="25">25</option><option value="30">30</option><option value="35">35</option><option value="40">40</option><option value="45">45</option><option value="50">50</option><option value="55">55</option><option value="60">60</option><option value="65">65</option>
					</datalist>
				</div>
			</div>
  
	  		<!-- RINGS PANEL -->
			<div id="ringsPanel" class="panel ring-card" style="min-width:220px;">
			    <h4>Rings to Adjust</h4>
				<div class="rings-main" id="ringsMain">--</div>
				<div class="rings-sub">
					<div>Max: <span id="r_max">--</span></div>
					<div>75%: <span id="r_75">--</span></div>
					<div>Mid: <span id="r_mid">--</span></div>
					<div>25%: <span id="r_25">--</span></div>
					<div>Min: <span id="r_min">--</span></div>
				</div>
				<div class="active-club" id="active_club">--</div>
			</div>

			<!-- Endbringer School panel (hidden initially) -->
			<div id="ebs-panel-root" class="ebsPanelWrapper hidden">
				<h4 class="ebsPanelHeader">
  					<span id="ebsHeader" class="header-title">ENDBRINGER SCHOOL</span>
  					<img src="blue_close_btn.png" class="info-icon" id="ebsCloseBtn">
				</h4>
				<div class="ebsInputLabelsContainer">
					<span class="ebsInputLabel">Wind (mph)</span> 	
					<span class="ebsInputLabel">Ball Power</span> 	
					<span class="ebsInputLabel">Elevation (%)</span> 	
				</div>
				<div class="ebsInputsContainer">
					<input id="ebsWindInput" type="number" step="0.1" value="0.0" class="ebsInput"> 	
					<select id="ebsBallPower" class="ebsInput">
						<option value=0 selected>0</option><option value=1>1</option><option value=2>2</option><option value=3>3</option><option value=4>4</option><option value=5>5</option><option value=6>6</option><option value=7>7</option><option value=8>8</option><option value=9>9</option><option value=10>10</option>
					</select>
					<input list="ebsElevList" id="ebsElevation" type="number" value="20" step="5" class="ebsInput">
					<datalist id="ebsElevList">
						<option value="-65">-65</option><option value="-60">-60</option><option value="-55">-55</option><option value="-50">-50</option><option value="-45">-45</option><option value="-40">-40</option><option value="-35">-35</option><option value="-30">-30</option><option value="-25">-25</option><option value="-20">-20</option><option value="-15">-15</option><option value="-10">-10</option><option value="-5">-5</option><option value="0">0</option><option value="5">5</option><option value="10">10</option><option value="15">15</option><option value="20">20</option><option value="25">25</option><option value="30">30</option><option value="35">35</option><option value="40">40</option><option value="45">45</option><option value="50">50</option><option value="55">55</option><option value="60">60</option><option value="65">65</option>
					</datalist>
				</div>
				<span class="ebsPanelSubHeader">Club Distance % --> Rings to Adjust</span>
				<div id="ebsContainer" class="ebsPanelContainer">
				   <div id="ebsCol1" class="ebsPanelColumn" style="border-right:solid; border-right-color:#cccccc">
					 <div class="ebsColRow"><p>140% --> <span id="ebs140">---</span></p></div>
					 <div class="ebsColRow"><p>135% --> <span id="ebs135">---</span></p></div>
					 <div class="ebsColRow"><p>130% --> <span id="ebs130">---</span></p></div>
					 <div class="ebsColRow"><p>125% --> <span id="ebs125">---</span></p></div>
					 <div class="ebsColRow"><p>120% --> <span id="ebs120">---</span></p></div>
					 <div class="ebsColRow"><p>115% --> <span id="ebs115">---</span></p></div>
					 <div class="ebsColRow"><p>110% --> <span id="ebs110">---</span></p></div>
				  </div>
				  <div id="ebsCol2" class="ebsPanelColumn" style="border-right:solid; border-right-color:#cccccc">
					<div class="ebsColRow"><p>105% --> <span id="ebs105">---</span></p></div>
					<div class="ebsColRow"><p>100% --> <span id="ebs100">---</span></p></div>
					<div class="ebsColRow"><p>95% --> <span id="ebs95">---</span></p></div>
					<div class="ebsColRow"><p>90% --> <span id="ebs90">---</span></p></div>
					<div class="ebsColRow"><p>85% --> <span id="ebs85">---</span></p></div>
					<div class="ebsColRow"><p>80% --> <span id="ebs80">---</span></p></div>
					<div class="ebsColRow"><p>75% --> <span id="ebs75">---</span></p></div>
				  </div>
				  <div id="ebsCol3" class="ebsPanelColumn" style="border-right:solid; border-right-color:#cccccc">
					<div class="ebsColRow"><p>70% --> <span id="ebs70">---</span></p></div>
					<div class="ebsColRow"><p>65% --> <span id="ebs65">---</span></p></div>
					<div class="ebsColRow"><p>60% --> <span id="ebs60">---</span></p></div>
					<div class="ebsColRow"><p>55% --> <span id="ebs55">---</span></p></div>
					<div class="ebsColRow"><p>50% --> <span id="ebs50">---</span></p></div>
					<div class="ebsColRow"><p>45% --> <span id="ebs45">---</span></p></div>
					<div class="ebsColRow"><p>40% --> <span id="ebs40">---</span></p></div>
				  </div>
				  <div id="ebsCol4" class="ebsPanelColumn">
					<div class="ebsColRow"><p>35% --> <span id="ebs35">---</span></p></div>
					<div class="ebsColRow"><p>30% --> <span id="ebs30">---</span></p></div>
					<div class="ebsColRow"><p>25% --> <span id="ebs25">---</span></p></div>
					<div class="ebsColRow"><p>20% --> <span id="ebs20">---</span></p></div>
					<div class="ebsColRow"><p>15% --> <span id="ebs15">---</span></p></div>
					<div class="ebsColRow"><p>10% --> <span id="ebs10">---</span></p></div>
					<div class="ebsColRow"><p>5% --> <span id="ebs5">---</span></p></div>
				  </div>
				</div>
			</div>

			<!-- SHORTCUT BUTTONS -->
			<div class="shortcut-bar" id="shortcutBar">
				<div class="tooltip-wrapper" style="height: var(--mainPanelsHdrHeight);">
					<img src="info_icon.png" class="info-icon" style="margin-right: 3px;" id="sc-info-btn">
					<div class="tooltip" role="status" aria-hidden="true">
						Click here for more info about the Shortcut Buttons.
					</div>
				</div>
			</div>


	</div>   <!-- end of Main Panel -->

		    <!-- FOOTER -->
			<!-- <footer>© 2025 Wind-Buddy by Justin Holmes. Inspired by the late great Wind Chum. May it rest in peace.</footer> -->

</div>		<!-- End of div.App -->

	<!-- Tools Info panel (hidden initially)  -->
	<div id="tools-info-modal">
		<div id="tools-info-box">
			<div id="tools-info-close">✖</div>

			<h2 style="margin-top: 0;">Tools Information</h2>

			<p><strong>Endbringer School</strong><br>
			Endbringer School mode is based on the Youtube video titled "Golf Clash - EndBringer School" by Jared A. Please watch that video for more information about the Endbringer School method. Although this tool is specifically designed for use with the Endbringer club (level 6-8), it may also be effective with any wedge club with an accuracy rating of atleast 90.<br><br>
			Selecting this tool automatically sets the current wedge club as the active club and displays the Endbringer School panel. The user can then input the wind, ball power, and elevation values into the panel. The tool will then calculate and display the recommended ring adjustments for club distance percentages ranging from 140% down to 5%.<br><br>
			To exit Endbringer School mode, simply click the blue close button (X) at the top right of the panel. This will hide the panel and return the app to its previous state prior to entering Endbringer School mode.</p>

			<p><strong>Tournament Notes</strong><br>
			Opens simple note-taking pages for the front and back 9 for up to three different tournaments. Notes are securely saved to your user account and restored automatically when you log in. If you do not have a user account, you can create one using the Sign In button at the top of the application. It's free and only takes a moment.</p>

			<p><strong>CPC Mode / Reset</strong><br>
			Clears all selected clubs and levels, and returns the interface to a clean state. This can be utilized before starting a Checkpoint Challenge match.</p>

			<p style="font-style: italic; margin-top: 18px;">
				More tools are planned for future versions of Wind-Buddy.
			</p>
		</div>
	</div>
	
	<!-- Shortcut Buttons Info panel (hidden initially) -->
	<div id="sc-info-modal">
		<div id="sc-info-box">
			<div id="sc-info-close">✖</div>

			<h3 style="margin-top: 0;">Current Club Selections (Shortcut Buttons)</h3>

			<p>
			These 'shortcut' buttons only become enabled when both a club and a level are selected for the corresponding button's club type (Driver, Wood, Long Iron etc). If no club or no level is selected for a club type, that shortcut button will be disabled. The idea behind these buttons is for the user to have a quick and easy way to switch between clubs after selections have been made from the club panels at the top of the app or loaded into the app via a saved golf bag.  When a shortcut button is enabled, clicking it makes that club the active club in the application and the ring adjustment values being displayed are based on that club. The active club's shortcut button will also change colors to provide a visual confirmation that it is the active club. 
			</p>
			<p>
			In addition to making that club active and recalculating the ring adjustment, clicking on a shortcut button also sets the keyboard focus to the wind input field in the Shot Adjustments panel. This happens automatically and should assist the user in getting the new wind value into the app quickly by eliminating the need for repetitive pointing and clicking activity. The current contents of the wind input field will be selected (as if the user had clicked in the field and then pressed CTRL-A on the keyboard), so that the user can type in the new wind value and remove the old value simultaineously.  
			</p>
			<p>
			Also note that when you select a saved golf bag by clicking on a golf bag button, the driver for that bag is automatically selected and becomes the active club.  All of the shortcut buttons will update to reflect the clubs and levels that were saved for that bag. The driver shortcut button will change colors to reflect that it is now the active club, and keyboard focus will go to the wind input field as if the user had clicked on the driver shortcut button.
			</p>

		</div>
	</div>

	<!-- Golf Bags Info panel (hidden initially) -->
	<div id="gb-info-modal">
		<div id="gb-info-box">
			<div id="gb-info-close">✖</div>

			<h3 style="margin-top: 0;">Golf Bags</h3>

			<p>
			The Golf Bags panel allows you to save and load up to 5 different sets of club selections and levels. This is useful because various courses require different club setups. To save your current club selections and levels into a golf bag, simply click the "Save Current" button next to the desired bag number. The "Save Current" buttons only become enabled when a club and a level are selected for each club category. Saving a golf bag will overwrite any previously saved data in that bag. To load a saved golf bag, click on the corresponding bag button (e.g., "Bag1", "Bag2", etc.). The app will then update the club selections and levels to match those saved in the selected bag.
			</p>
			<p>
			To utilize the Golf Bags feature, you must be signed in to your account. This ensures that your saved bags are securely stored and can be accessed across different devices. If you are not signed in, the golf bag buttons will be disabled. If you do not have a user account, you can create one using the Sign In button at the top of the application. It's free and only takes a moment.
			</p>

		</div>
	</div>


<!-- Init Firebase -->
<script type="module" src="firebase-init.js"></script>

<!-- Auth UI + onAuthState (needs firebase-init) -->
<script type="module" src="firebase-auth.js"></script>

<!-- Your app code (imports firebase-init & auth) -->
<script type="module" src="WindBuddy.js"></script>

</body>
</html>


